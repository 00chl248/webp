<!-- suggest.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê±´ì˜ì‚¬í•­ | ì—¬ê¸°ê³¼ê¸°ëŒ€</title>
  <link rel="stylesheet" href="style.css" />
  <!-- ì§€ë„ìš© CDN (Leaflet.js) -->
   
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.css" />
  <script src="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.js"></script>



  
  <script>
    function showForm(type) {
      const infoPanel = document.getElementById("info-panel");
      const placePanel = document.getElementById("place-panel");

      if (type === "info") {
        infoPanel.style.display = "block";
        placePanel.style.display = "none";
      } else if (type === "place") {
        infoPanel.style.display = "none";
        placePanel.style.display = "block";
      }
    }

    function submitSuggestion(event, type) {
      event.preventDefault();

      const textArea = document.getElementById(type + "-text"); //  ë³€ìˆ˜ëª… ìˆ˜ì •
      const text = textArea.value;

      if (text.trim() === "") {
        alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      alert(`${type === 'info' ? 'ì •ë³´ìˆ˜ì •' : 'ì¥ì†Œì¶”ì²œ'} ê±´ì˜ê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!`);

      textArea.value = ""; // ì˜¤ë¥˜ ì›ì¸: ì—¬ê¸°ë¥¼ textAreaë¡œ ë°”ê¿”ì•¼ í•¨

      // í¼ ë‹«ê¸°
      if (type === "info") {
        document.getElementById("info-panel").style.display = "none";
      } else {
        document.getElementById("place-panel").style.display = "none";
      }
    }
  

  
    let mapInitialized = false;
    let map, marker;

    function handleBuildingChange(event) {
      const selected = event.target.value;
      const mapContainer = document.getElementById("map-container");

      if (selected === "ê±´ë¬¼ ì•„ë‹˜") {
        mapContainer.style.display = "block";

        // ì§€ë„ ìµœì´ˆ 1íšŒë§Œ ì´ˆê¸°í™”
        if (!mapInitialized) {
          map = L.map('map', {
            center: [37.631814, 127.077401],
            zoom: 17,
            fullscreenControl: true // â›¶ ì „ì²´í™”ë©´ ë²„íŠ¼ í™œì„±í™”
          });
          // í”„ë¡ í‹°ì–´ê´€ ìœ„ì¹˜


          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
          }).addTo(map);

          map.on('click', function (e) {
            const { lat, lng } = e.latlng;
            if (!marker) {
              marker = L.marker([lat, lng]).addTo(map);
            } else {
              marker.setLatLng([lat, lng]);
            }

            //ì¢Œí‘œë¥¼ hidden inputì— ì €ì¥
            document.getElementById("lat").value = lat;
            document.getElementById("lng").value = lng;

            console.log("í•€ ì¢Œí‘œ:", lat, lng);
          });


          mapInitialized = true;
        }
      } else {
        mapContainer.style.display = "none";
      }
    }
  

  
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }

    window.addEventListener('click', function (e) {
      const sidebar = document.getElementById('sidebar');
      const icon = document.querySelector('.category-icon');
      if (
        sidebar.classList.contains('active') &&
        !sidebar.contains(e.target) &&
        !icon.contains(e.target)
      ) {
        sidebar.classList.remove('active');
      }
    });
  </script>



</head>
<body>


  
  <div class="navbar">
    <div class="navbar-inner">

      <div class="logo">   
        <a href="main.html">
          <img src="im01.png" alt="ë¡œê³ " />
        </a>
      </div>

      <!-- <div class="category-icon" onclick="history.back()">â†</div> -->
      <div class="category-icon" onclick="toggleSidebar()">â˜°</div>

    </div>
  </div>

  <!-- ===== ì‚¬ì´ë“œ ë©”ë‰´ ===== -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-close" onclick="toggleSidebar()">âœ•</div>

    <button class="login-button" id="loginBtn">íšŒì›ê°€ì… / ë¡œê·¸ì¸</button>

    <ul>
      <li onclick="location.href='myplace.html'">My Place & Comments</li>
      <li onclick="location.href='suggest.html'">ê±´ì˜ì‚¬í•­</li>
      <li>ì „ì²´ ì§€ë„</li>
    </ul>
  </div>


  <div class="main-content" style="display: flex; align-items: flex-start; gap: 30px;">
    
    <!-- ğŸ”¹ ì™¼ìª½: ì •ë³´ ìˆ˜ì • í¼ -->
    <div id="info-panel" style="display: none; width: 35%;">
      <div class="search-container">


        <div class="search-title">ì •ë³´ ìˆ˜ì • ê±´ì˜</div>
        <form onsubmit="submitSuggestion(event, 'info')">
          <textarea id="info-text" rows="8" style="width: 100%; border-radius: 8px; padding: 1rem; border: 1px solid #ccc;"></textarea>
          <button class="search-button" type="submit">ì œì¶œí•˜ê¸°</button>
        </form>
      </div>
    </div>

    <!-- ğŸ”¸ ê°€ìš´ë°: ì¹´ë“œ 2ê°œ -->
    <div style="display: flex; flex-direction: column; gap: 20px;">
      <div class="suggestion-option" onclick="showForm('info')">
        <img src="info.png" alt="ì •ë³´ìˆ˜ì •">
        <span>ì •ë³´ìˆ˜ì •</span>
      </div>
      <div class="suggestion-option" onclick="showForm('place')">
        <img src="place.png" alt="ì¥ì†Œì¶”ì²œ">
        <span>ì¥ì†Œì¶”ì²œ</span>
      </div>
    </div>

    <!-- ğŸ”¹ ì˜¤ë¥¸ìª½: ì¥ì†Œ ì¶”ì²œ í¼ -->
    <div id="place-panel" style="display: none; width: 35%;">
      <div class="search-container">
        <div class="search-title">ì¥ì†Œ ì¶”ì²œ ê±´ì˜</div>
        <hr>
        <br/>
        <form onsubmit="submitSuggestion(event, 'place')">

          <!-- 2. ê±´ë¬¼ ì„ íƒ (ë¼ë””ì˜¤ ë²„íŠ¼) -->
          <label style=" display: block; margin-bottom: 0.5rem;">ì¶”ì²œì¥ì†Œ ìœ„ì¹˜</label>

          <div style="margin-bottom: 1rem;">
            <div style="display: flex; gap: 15px; flex-wrap: wrap;" onchange="handleBuildingChange(event)">
              <label><input type="radio" name="building" value="í”„ë¡ í‹°ì–´ê´€"> í”„ë¡ í‹°ì–´ê´€</label>
              <label><input type="radio" name="building" value="ì°½ì˜ê´€"> í•˜ì´í…Œí¬ê´€</label>
              <label><input type="radio" name="building" value="ê³¼í•™ê´€"> ì œ 1í•™ìƒíšŒê´€</label>
              <label><input type="radio" name="building" value="ì˜ˆìˆ ê´€"> ë„ì„œê´€</label>
              <label><input type="radio" name="building" value="ê±´ë¬¼ ì•„ë‹˜"> ê±´ë¬¼ ì•„ë‹˜</label>
            </div>
          </div>

          <!-- 1. ì¥ì†Œ ì´ë¦„ -->

          <input type="text" placeholder="ì¶”ì²œí•  ì¥ì†Œ ìƒì„¸ ìœ„ì¹˜(ex.í”„ë¡ í‹°ì–´ê´€ 3ì¸µ ê³µë¶€ì±…ìƒ ìˆëŠ” ê³³)" style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; border-radius: 8px; border: 1px solid #ccc;" id="place-name">

          <!-- 2. ì¶”ì²œ ì´ìœ  -->
          <label style=" display: block; margin-bottom: 0.5rem;">ì¶”ì²œì´ìœ </label>
          <textarea id="place-text" rows="5" placeholder="ì¶”ì²œ ì´ìœ ë¥¼ ì ì–´ì£¼ì„¸ìš” (ì˜ˆ: ì¡°ìš©í•˜ê³  ê³µë¶€í•˜ê¸° ì¢‹ì•„ìš”!)" style="width: 100%; padding: 1rem; border-radius: 8px; border: 1px solid #ccc;"></textarea>

          <!-- ì§€ë„ ì˜ì—­ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
          <div id="map-container" style="width: 100%; height: 300px; margin-bottom: 1rem; display: none;">
            <div id="map" style="width: 100%; height: 100%; border-radius: 12px;"></div>
          </div>

          <!-- ìˆ¨ê²¨ì§„ ì¢Œí‘œ ì €ì¥ìš© input -->
          <input type="hidden" id="lat" name="lat">
          <input type="hidden" id="lng" name="lng">

          <!-- 4. ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
          <div style="margin-top: 1rem;">
            <label for="place-image">ì‚¬ì§„ ì—…ë¡œë“œ</label><br>
            <input type="file" id="place-image" accept="image/*" onchange="previewImage(event)">
            <img id="image-preview" src="#" alt="ë¯¸ë¦¬ë³´ê¸°" style="display: none; margin-top: 10px; max-width: 100%;">
          </div>

          <!-- ì œì¶œ -->
          <br>
          <button class="search-button" type="submit" style="margin-top: 1rem;">ì œì¶œí•˜ê¸°</button>
        </form>
      </div>
    </div>
  </div>


</body>
</html>
